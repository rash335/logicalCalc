{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Conversions</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.2.min.css " rel=”stylesheet” type=”text/css”>
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.2.min.css" rel=”stylesheet” type=”text/css”>
    <link rel="shortcut icon" href="http://example.com/myicon.ico">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    
    <style>
    </style>

</head>
<body>
    <!-- menu area container starts here -->
    <div class="container-flex p-2 sticky-top menuarea">
        <span class="d-flex flex-row align-items-center menuitems hover" data-bs-toggle="collapse" data-bs-target="#items" aria-controls="items" aria-expanded="false">
            <!-- <div class="nav-home text-center hover"> -->
                <!-- <span> -->
                    <img src="{% static 'images/calculator.png' %}" alt="calculator"style="width: 50px;height: 50px;"/>
                    &nbsp; &nbsp; <span class="apptitle">NUMBER SYSTEM CONVERSIONS</span>
                <!-- </span> -->
            <!-- </div> -->
        </span>
        <div class="collapse" id="items">
            <ul class="list-group list-group-horizontal-lg list-group-vertical">
                <a href="/" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Home </span> </button> </a>
                <a href="" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Base Conversions </span> </button> </a>
                <a href="/bitShift" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Shift </span> </span> </button> </a>
                <a href="/bitRotate" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Rotate </span> </span> </button> </a>
                <a href="/bitArithmetic" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Arithmetic </span> </button> </a>
                <a href="/logicalOperations" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Logical Operations </span> </button> </a>
            </ul>
        </div>
        <hr class="divider">
    </div>
    <!-- menu area container ends here -->

<!-- ACTUAL INPUT FIELDS FORM FOR ALL THE CONVERSIONS START HERE -->
<div class="container">
    <!-- <p><h2 class="text-danger display-4">NUMBER SYSTEM CONVERSIONS</h2></p> -->
    <!-- <P>Please select the appropriate number of bits</P> -->
    <!-- <div class="col-sm-12 col-md-6 text-dark align-items-center" style="display: flex;">
        <div class="form-check form-switch">
            <input type="checkbox" name="bit08" id="b08" checked class="form-check-input" onclick="bitselect()">
            <label for="b08" class="form-check-label">8-bit</label>
        </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" name="bit16" id="b16" onclick="bitselect()">
            <label class="form-check-label" for="b16"> 16-bit </label>
        </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" name="bit32" id="b32" onclick="bitselect()">
            <label class="form-check-label" for="b32"> 32-bit </label>
        </div>
    </div> -->

    <form action="" method="POST" class="myform">
        {% csrf_token %}
        <div class="input-group input-group-sm p-3" id="allTextInputs">
            <!-- input fields container starts here -->
            <div class="container">
                <P><h2 class="text-primary ">DECIMAL TO BINARY AND HEX CONVERSION</h2></P>
                <!-- container 1st row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns in 1st row starts here -->
                    <div class="col-sm-12 col-md-5 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">DECIMAL INPUT</span>
                        <div style="display: flex; margin: auto; width: 100%;">
                            <button id="decSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                id="dec" name="dec"onchange="modifyFormValues()" value="0">
                            <button id="decAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                        </div>
                    </div>
                    <!-- container columns in 1st row ends here -->
                </div>
                <!-- container 1st row ends here -->
                <p></p>
                <!-- container 2nd row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns of 2nd row start here -->
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY(signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="decbinS" name="decbinS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL (signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="dechexS" name="dechexS">
                    </div>
                </div>
                <div class="row align-items-end justify-around">
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="decbinUS" name="decbinUS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="dechexUS" name="dechexUS">
                    </div>  
                    <!-- container columns of 2nd row end here -->
                </div>
                <!-- container 2nd row ends here -->

                <P><H2 class="text-primary">BINARY TO HEX AND DECIMAL CONVERSION</H2></P>
                <!-- container 3rd row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns in the 3rd row starts here -->
                    <div class="col-sm-12 col-md-5 text-dark align-items-center" style="border-radius: 2cm;border:0.5px red">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY INPUT</span>
                        <div style="display:flex; margin: auto; width: 100%;">
                            <button id="binSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                            id="bin" name="bin"onchange="modifyFormValues()"value="0">
                            <button id="binAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                        </div>
                    </div>
                    <!-- container columns in the 3rd row ends here -->
                </div>
                <!-- container 3rd row ends here -->
                <p></p>
                <!-- container 4th row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns of 4th row starts here -->
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL (signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="binhexS" name="binhexS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL (signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="bindecS" name="bindecS">
                    </div>
                </div>
                <div class="row align-items-end justify-around">
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="binhexUS" name="binhexUS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="bindecUS" name="bindecUS">
                    </div>                                                      
                    <!-- container columns of 4th row ends here -->
                </div>
                <!-- container 4th row ends here -->



                <P><H2 class="text-primary">HEX TO DECIMAL AND BINARY CONVERSION</H2></P>
                <!-- container 5th row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns in the 5th row starts here -->
                    <div class="col-sm-12 col-md-5 text-dark align-items-center" style="border-radius: 2cm;border:0.5px red">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL INPUT</span>
                        <div style="display:flex; margin: auto; width: 100%;">
                            <button id="hexSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"
                            id="hex" name="hex"onchange="modifyFormValues()"value="0">
                            <button id="hexAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                        </div>
                    </div>
                    <!-- container columns in the 5th row ends here -->
                </div>
                <!-- container 5th row ends here -->
                <p></p>
                <!-- container 6th row starts here -->
                <div class="row align-items-end justify-around">
                    <!-- container columns of 6th row starts here -->
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL (signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="hexdecS" name="hexdecS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY (signed)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="hexbinS" name="hexbinS">
                    </div>
                </div>
                <div class="row align-items-end justify-around">
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="hexdecUS" name="hexdecUS">
                    </div>
                    <div class="col-md-5 text-dark align-items-center">
                        <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY (unsigned)</span>
                        <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="hexbinUS" name="hexbinUS">
                    </div>                                                      
                    <!-- container columns of 6th row ends here -->
                </div>
                <!-- container 6th row ends here -->
            </div>
            <!-- input fields container ends here -->
        </div>
    </form>

<p></p>
<p></p>
<p></p>
&nbsp;
<p></p>
<p></p>
<p></p>

</div>
<!-- ACTUAL INPUT FIELDS FOR ALL CONVERSIONS END HERE -->

<hr class="divider">
<div class="container-flex fixed-bottom bg-light text-danger" style="height: 50px;">
    <div class="row" style="display: table; margin: auto;">
        <div class="col-md-12 align-items-center">
            <div class="col-sm-12 col-md-12 text-dark align-items-center" style="display: flex;">
                <div class="form-check form-switch">
                    <input type="checkbox" name="bit08" id="b08" checked class="form-check-input" onclick="bitselect()">
                    <label for="b08" class="form-check-label">8-bit</label>
                </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="bit16" id="b16" onclick="bitselect()">
                    <label class="form-check-label" for="b16"> 16-bit </label>
                </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="bit32" id="b32" onclick="bitselect()">
                    <label class="form-check-label" for="b32"> 32-bit </label>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
<script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/f0f52582e8.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.2.min.js"></script>

<script type="text/javascript">
    var b08status = $('#b08').is(':checked')==true;
    var b16status = $('#b16').is(':checked') == true;
    var b32status = $('#b32').is(':checked') == true;
    
    function numberOfBits()
    {
        var b08status = $('#b08').is(':checked')==true;
        var b16status = $('#b16').is(':checked') == true;
        var b32status = $('#b32').is(':checked') == true;
        var bits;
        if (b08status==1 && b16status==0 && b32status==0) bits=8;
        else if (b08status==0 && b16status==1 && b32status==0) bits=16;
        else if (b08status==0 && b16status==0 && b32status==1) bits=32;
        return bits;
    }
    
    function bitselect()
    {
        eventId = event.srcElement.id;
        if(eventId=='b08')
        {
            if (b08status==1)
            {
                $('#b08').prop('checked', true);
                $('#b16').prop('checked', false);
                $('#b32').prop('checked', false);
            }
            if (b08status==0)
            {
                $('#b08').prop('checked', true);
                $('#b16').prop('checked', b16status);
                $('#b32').prop('checked', b32status);
            }
        }
        else if (eventId=='b16')
        {
            $('#b08').prop('checked', false);
            $('#b16').prop('checked', true);
            $('#b32').prop('checked', false);            
        }
        else if (eventId=='b32')
        {
            $('#b08').prop('checked', false);
            $('#b16').prop('checked', false);
            $('#b32').prop('checked', true);            
        }
        modifyFormValues();
    }
    function modifyTextFields()
    {
        var bits = numberOfBits();        
        var myid = event.srcElement.id;
        var operation = myid.slice(3,6);
        myid = myid.slice(0,3);        
        var stringVal = $('#'+myid).val();
        if(myid=='dec')
        {
            if(operation=='Add') var val = parseInt(stringVal) + 1;
            else if(operation=='Sub') var val = parseInt(stringVal) - 1;
            document.getElementById(myid).value = val;
        }
        if(myid=='bin')
        {
            $.ajax({
                type:"POST",
                url: 'changeBinary',
                async: false,
                data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
                csrfmiddlewaretoken: "{{ csrf_token }}"},
                dataType: 'json',
                success: function (data)
                {
                    document.getElementById(myid).value = data.changedValue;
                }
            })
        }
        if(myid=='hex')
        {$.ajax({
            type:"POST",
            url: 'changeHexa',
            async: false,
            data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
            csrfmiddlewaretoken: "{{ csrf_token }}"},
            dataType: 'json',
            success: function (data)
            {
                document.getElementById(myid).value = data.changedValue;
            }
        })}
        modifyFormValues();
    }
    function decrement()
    {}
    function modifyFormValues()
    {
        var dec, bin, hex;
        var bits = numberOfBits();
        decString = ( $('#dec').val() );
        binString = ( $('#bin').val() );
        hexString = ( $('#hex').val() );
        $.ajax({
            type: "POST",
            url: "allconversions",
            data: {
                'decstr':decString, 'binstr':binString, 'hexstr':hexString, 'bits':bits,
                csrfmiddlewaretoken: "{{ csrf_token }}"
            },
            dataType: "json",
            success: function (data)
            {
                for (const [id, value] of Object.entries(data))    document.getElementById(id).value = value;
            },
        })
    }
</script>

</html>