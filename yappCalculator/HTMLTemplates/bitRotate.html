{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bit Rotate </title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="Rsha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="Rsha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="Rsha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.2.min.css " rel=”stylesheet” type=”text/css”>
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.2.min.css" rel=”stylesheet” type=”text/css”>
    <link rel="Rshortcut icon" href="http://example.com/myicon.ico">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="Rsha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    
    <style>
    </style>

</head>
<body>
    <!-- menu area container starts here -->
    <div class="container-flex p-2 sticky-top menuarea">
        <span class="d-flex flex-row align-items-center menuitems hover" data-bs-toggle="collapse" data-bs-target="#items" aria-controls="items" aria-expanded="false">
                    <img src="{% static 'images/calculator.png' %}" alt="calculator"style="width: 50px;height: 50px;"/>
                    &nbsp; &nbsp; <span class="apptitle">LOGICAL ROTATING OPERATIONS</span>
        </span>
        <div class="collapse" id="items">
            <ul class="list-group list-group-horizontal-lg list-group-vertical">
                <a href="/" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Home </span> </button> </a>
                <a href="/baseConversions" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Base Conversions </span> </button> </a>
                <a href="/bitShift" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Shift </span> </span> </button> </a>
                <a href="" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Rotate </span> </span> </button> </a>
                <a href="/bitArithmetic" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Arithmetic </span> </button> </a>
                <a href="/logicalOperations" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Logical Operations</span> </button> </a>
            </ul>
        </div>
        <hr class="divider">
    </div>
    <!-- menu area container ends here -->

    <!-- field inputs and outputs container starts here -->
    <div class="container">
        
        <form action="" method="POST" class="myform">
            {% csrf_token %}
            <div class="input-group p-3" id="allTextInputs">
                <!-- input fields start here -->
                <div class="container">
                    <!-- <p><h2>LOGICAL ROTATE OPERATIONS</h2></p> -->
                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">DECIMAL INPUT</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="DecInSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="DecIn" name="DecIn"onchange="modifyFormValues()" value="0">
                                <button id="DecInAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" > 
                                <select class="form-select bg-light text-primary" id="DecimalRotate" onchange="modifyFormValues()">
                                    <option selected=""> Rotate Right </option>
                                    <option >Rotate Left</option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:40%; margin: auto;">No. of bits</span>
                            <div style="display: flex; width: 40%; margin: auto;">
                                <button id="DecPosSub" class="changevalues" style="" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="DecPos" name="DecPos"onchange="modifyFormValues()" value="0">
                                <button id="DecPosAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotDecDec" name="RotDecDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotDecBin" name="RotDecBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="RotDecHex" name="RotDecHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->

                    <p></p>
                    &nbsp;
                    <p></p>

                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">BINARY INPUT</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="BinInSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="BinIn" name="BinIn"onchange="modifyFormValues()" value="0">
                                <button id="BinInAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" >
                                <select class="form-select bg-light text-primary" id="BinaryRotate" onchange="modifyFormValues()">
                                    <option selected=""> Rotate Right </option>
                                    <option >Rotate Left</option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:40%; margin: auto;">No. of bits</span>
                            <div style="display: flex; width: 40%; margin: auto;">
                                <button id="BinPosSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="BinPos" name="BinPos"onchange="modifyFormValues()" value="0">
                                <button id="BinPosAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotBinDec" name="RotBinDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotBinBin" name="RotBinBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="RotBinHex" name="RotBinHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->

                    <p></p>
                    &nbsp;
                    <p></p>

                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">HEXADECIMAL INPUT</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="HexInSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="HexIn" name="HexIn"onchange="modifyFormValues()" value="0">
                                <button id="HexInAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" >
                                <select class="form-select bg-light text-primary" id="HexaRotate" onchange="modifyFormValues()">
                                    <option selected=""> Rotate Right </option>
                                    <option >Rotate Left</option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:40%; margin: auto;">No. of bits</span>
                            <div style="display: flex; width: 40%; margin: auto;">
                                <button id="HexPosSub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="HexPos" name="HexPos"onchange="modifyFormValues()" value="0">
                                <button id="HexPosAdd" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotHexDec" name="RotHexDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="RotHexBin" name="RotHexBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="RotHexHex" name="RotHexHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->


                </div>
                <!-- input fields end here -->
            </div>
         </form>   
    </div>
    <!-- field inputs and outputs container ends here -->
    <p></p>
    <p></p>
    <p></p>
    &nbsp;
    <p></p>
    <p></p>
    <p></p>

    <hr class="divider">
    <div class="container-flex fixed-bottom bg-light text-danger" style="height: 50px;">
        <div class="row" style="display: table; margin: auto;">
            <div class="col-md-12 align-items-center">
                <div class="col-sm-12 col-md-12 text-dark align-items-center" style="display: flex;">
                    <div class="form-check form-switch">
                        <input type="checkbox" name="bit08" id="b08" checked class="form-check-input" onclick="bitselect()">
                        <label for="b08" class="form-check-label">8-bit</label>
                    </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="bit16" id="b16" onclick="bitselect()">
                        <label class="form-check-label" for="b16"> 16-bit </label>
                    </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="bit32" id="b32" onclick="bitselect()">
                        <label class="form-check-label" for="b32"> 32-bit </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

</body>
<script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="Rsha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="Rsha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/f0f52582e8.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="Rsha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.2.min.js"></script>

<script type="text/javascript">
    function numberOfBits()
    {
        var b08status = $('#b08').is(':checked')==true;
        var b16status = $('#b16').is(':checked') == true;
        var b32status = $('#b32').is(':checked') == true;
        var bits;
        if (b08status==1 && b16status==0 && b32status==0) bits=8;
        else if (b08status==0 && b16status==1 && b32status==0) bits=16;
        else if (b08status==0 && b16status==0 && b32status==1) bits=32;
        console.log('the num of bits is: ',bits)
        return bits;
    }
    function Select()
    {
        myid = event.srcElement.id;
        return $('#'+myid).val()
    }
    function bitselect()
    {
        eventId = event.srcElement.id;
        if(eventId=='b08')
        {
            $('#b08').prop('checked', true);
            $('#b16').prop('checked', false);
            $('#b32').prop('checked', false);
        }
        else if (eventId=='b16')
        {
            $('#b08').prop('checked', false);
            $('#b16').prop('checked', true);
            $('#b32').prop('checked', false);            
        }
        else if (eventId=='b32')
        {
            $('#b08').prop('checked', false);
            $('#b16').prop('checked', false);
            $('#b32').prop('checked', true);            
        }
        modifyFormValues();
    }
    function modifyTextFields()
    {
        var bits = numberOfBits();
        var myid = event.srcElement.id;
        var operation = myid.slice( myid.length-3,myid.length );
        myid = myid.slice(0,myid.length-3);
        console.log('the id and operation are: ', myid, operation)
        var stringVal = $('#'+myid).val();
        if(myid=='BinIn')
        {
            $.ajax({
                type:"POST",
                url: 'changeBinary',
                async: false,
                data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
                csrfmiddlewaretoken: "{{ csrf_token }}"},
                dataType: 'json',
                success: function (data)
                {
                    document.getElementById(myid).value = data.changedValue;
                }
            })
        }
        else if(myid=='HexIn')
        {$.ajax({
            type:"POST",
            url: 'changeHexa',
            async: false,
            data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
            csrfmiddlewaretoken: "{{ csrf_token }}"},
            dataType: 'json',
            success: function (data)
            {
                document.getElementById(myid).value = data.changedValue;
            }
        })}
        else
        {
            if(operation=='Add') var val = parseInt(stringVal) + 1;
            else if(operation=='Sub') var val = parseInt(stringVal) - 1;
            //if (val<0)  val=0;
            document.getElementById(myid).value = val;
        }
        modifyFormValues();
    }
    function modifyFormValues()
    {
        var dec, bin, hex;
        var bits = numberOfBits();
        var decString = ( $('#DecIn').val() );
        var binString = ( $('#BinIn').val() );
        var hexString = ( $('#HexIn').val() );
        var DecimalRotate = ($( '#DecimalRotate' ).val()); DecimalRotate = DecimalRotate.slice(7,DecimalRotate.length)
        var BinaryRotate = ($( '#BinaryRotate' ).val()); BinaryRotate = BinaryRotate.slice(7,BinaryRotate.length)
        var HexaRotate = ($( '#HexaRotate' ).val()); HexaRotate = HexaRotate.slice(7,HexaRotate.length)

        var DecPos = $("#DecPos").val();
        var BinPos = $("#BinPos").val();
        var HexPos = $("#HexPos").val();
        
        
        $.ajax({
            type: "POST",
            url: "allRotatings",
            data: {
                'decstr':decString, 'binstr':binString, 'hexstr':hexString, 'bits':bits,
                'decRotate':DecimalRotate, 'binRotate':BinaryRotate, 'hexRotate':HexaRotate,
                'decpos':DecPos, 'binpos':BinPos, 'hexpos':HexPos,
                csrfmiddlewaretoken: "{{ csrf_token }}"
            },
            dataType: "json",
            success: function (data)
            {   console.log(data)
                for (const [id, value] of Object.entries(data))    
                {   
                    document.getElementById(id).value = value;
                }
            },
        })
        

    }

</script>

</html>