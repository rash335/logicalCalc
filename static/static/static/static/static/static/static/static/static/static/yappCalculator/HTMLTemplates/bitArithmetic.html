{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.2.min.css " rel=”stylesheet” type=”text/css”>
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.2.min.css" rel=”stylesheet” type=”text/css”>
    <link rel="shortcut icon" href="http://example.com/myicon.ico">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    
    <style>

    </style>

    <title>Bit Arithmetic operations</title>

    <body>
        <!-- menu area container starts here -->
        <div class="container-flex p-2 sticky-top menuarea">
            <span class="d-flex flex-row align-items-center menuitems" data-bs-toggle="collapse" data-bs-target="#items" aria-controls="items" aria-expanded="false">
                <div class="nav-home text-center hover">
                    <span>
                        <img src="{% static 'images/calculator.png' %}" alt="calculator"style="width: 50px;height: 50px;"/>
                        &nbsp; &nbsp; <span class="apptitle">BIT ARITHMETIC OPERATIONS</span>
                    </span>
                </div>
            </span>
            <div class="collapse" id="items">
                <ul class="list-group list-group-horizontal-lg list-group-vertical">
                    <a href="/" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Home </span> </button> </a>
                    <a href="/baseConversions" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Base Conversions </span> </button> </a>
                    <a href="/bitShift" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Shift </span> </span> </button> </a>
                    <a href="/bitRotate" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Rotate </span> </span> </button> </a>
                    <a href="" class="nav-link active"> <button class="btn button text-light rounded-pill"> <span class="p-1"> Bit Arithmetic </span> </button> </a>
                </ul>
            </div>
            <hr class="divider">
        </div>
        <!-- menu area container ends here -->

        <!-- field inputs and outputs container starts here -->
    <div class="container">
        
        <form action="" method="POST" class="myform">
            {% csrf_token %}
            <div class="input-group p-3" id="allTextInputs">
                <!-- input fields start here -->
                <div class="container">
                    <!-- <p><h2>LOGICAL SHIFT OPERATIONS</h2></p> -->
                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">DECIMAL INPUT 1</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="Dec1Sub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Dec1" name="Dec1"onchange="modifyFormValues()" value="0">
                                <button id="Dec1Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" > 
                                <select class="form-select bg-light text-primary" id="DecimalArth" onchange="modifyFormValues()">
                                    <option selected=""> + (Add) </option>
                                    <option > - (Subtract) </option>
                                    <option > * (Multiply) </option>
                                    <option > / (Divide) </option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:100%; margin: auto;">DECIMAL INPUT 2</span>
                            <div style="display: flex; width: 100%; margin: auto;">
                                <button id="Dec2Sub" class="changevalues" style="" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Dec2" name="Dec2"onchange="modifyFormValues()" value="0">
                                <button id="Dec2Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthDecDec" name="ArthDecDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthDecBin" name="ArthDecBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="ArthDecHex" name="ArthDecHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->

                    <p></p>
                    &nbsp;
                    <p></p>

                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">BINARY INPUT 1</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="Bin1Sub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Bin1" name="Bin1"onchange="modifyFormValues()" value="0">
                                <button id="Bin1Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" >
                                <select class="form-select bg-light text-primary" id="BinaryArth" onchange="modifyFormValues()">
                                    <option selected=""> + (Add) </option>
                                    <option > - (Subtract) </option>
                                    <option > * (Multiply) </option>
                                    <option > / (Divide) </option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:100%; margin: auto;">BINARY INPUT 2</span>
                            <div style="display: flex; width: 100%; margin: auto;">
                                <button id="Bin2Sub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Bin2" name="Bin2"onchange="modifyFormValues()" value="0">
                                <button id="Bin2Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthBinDec" name="ArthBinDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthBinBin" name="ArthBinBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="ArthBinHex" name="ArthBinHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->

                    <p></p>
                    &nbsp;
                    <p></p>

                    <!-- container 1st row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns in 1st row starts here -->
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width:100%">HEXADECIMAL INPUT 1</span>
                            <div style="display: flex; margin: auto; width: 100%;">
                                <button id="Hex1Sub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Hex1" name="Hex1"onchange="modifyFormValues()" value="0">
                                <button id="Hex1Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3 text-dark align-self-center">
                            <span class="display-3" style="display: table; margin: auto;" >
                                <select class="form-select bg-light text-primary" id="HexaArth" onchange="modifyFormValues()">
                                    <option selected=""> + (Add) </option>
                                    <option > - (Subtract) </option>
                                    <option > * (Multiply) </option>
                                    <option > / (Divide) </option>
                                  </select>
                            </span>
                        </div>
                        <div class="col-sm-12 col-md-4 text-dark align-items-center" style="border-radius: 1cm; border: 0.5px red;">
                            <span class="input-group-text text-primary" style="width:100%; margin: auto;">HEXA DECIMAL INPUT 2</span>
                            <div style="display: flex; width: 100%; margin: auto;">
                                <button id="Hex2Sub" class="changevalues" type="button"onclick="modifyTextFields()">-</button>
                                <input type="text" class="w-90 form-control text-center" style="margin: auto;" 
                                    id="Hex2" name="Hex2"onchange="modifyFormValues()" value="0">
                                <button id="Hex2Add" class="changevalues" type="button"onclick="modifyTextFields()">+</button>
                            </div>
                        </div>
                        <!-- container columns in 1st row ends here -->
                    </div>
                    <!-- container 1st row ends here -->
                    <p></p>
                    <!-- container 2nd row starts here -->
                    <div class="row align-items-end justify-around">
                        <!-- container columns of 2nd row start here -->
                        <div class="col-md-2 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">DECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthHexDec" name="ArthHexDec" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">BINARY</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;" id="ArthHexBin" name="ArthHexBin" value="">
                        </div>
                        <div class="col-md-5 text-dark align-items-center">
                            <span class="input-group-text text-primary" style="display: table; margin: auto; width: 100%;">HEXADECIMAL</span>
                            <input type="text" class="w-90 form-control text-center" style="margin: auto;"id="ArthHexHex" name="ArthHexHex" value="">
                        </div>
                        <!-- container columns of 2nd row end here -->
                    </div>
                    <!-- container 2nd row ends here -->


                </div>
                <!-- input fields end here -->
            </div>
         </form>   
    </div>
    <!-- field inputs and outputs container ends here -->
    <p></p>
    <p></p>
    <p></p>
    &nbsp;
    <p></p>
    <p></p>
    <p></p>

    <hr class="divider">
    <div class="container-flex fixed-bottom bg-light" style="height: 60px;" id="bitselection">
        <p></p>
        <div class="row" style="display: table; margin: auto;">
            <div class="col-md-12 align-items-center">
                <div class="col-sm-12 col-md-12 text-dark align-items-center" style="display: flex;">
                    <div class="form-check form-switch">
                        <input type="checkbox" name="bit08" id="b08" checked class="form-check-input" onclick="bitselect()">
                        <label for="b08" class="form-check-label">8-bit</label>
                    </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="bit16" id="b16" onclick="bitselect()">
                        <label class="form-check-label" for="b16"> 16-bit </label>
                    </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="bit32" id="b32" onclick="bitselect()">
                        <label class="form-check-label" for="b32"> 32-bit </label>
                    </div>
                </div>
            </div>
        </div>
    </div>




        <!-- footer starts here  -->
        <div class="container w-50">
            <div class="row justify-content-center align-items-center" style="height: 30px;">
            <div class="col-12 text-center">&copy;2022-Rajesh. All rights reserved. Developed by
                <a>Rajesh</a>
            </div>
            </div>
        </div>
        <!-- footer ends here  -->
    </body>

    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/f0f52582e8.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.2.min.js"></script>

    <script type="text/javascript">
        function numberOfBits()
    {
        var b08status = $('#b08').is(':checked')==true;
        var b16status = $('#b16').is(':checked') == true;
        var b32status = $('#b32').is(':checked') == true;
        var bits;
        if (b08status==1 && b16status==0 && b32status==0) bits=8;
        else if (b08status==0 && b16status==1 && b32status==0) bits=16;
        else if (b08status==0 && b16status==0 && b32status==1) bits=32;
        console.log('the num of bits is: ',bits)
        return bits;
    }
        function bitselect()
        {
            var b08status = $('#b08').is(':checked') == true;
            var b16status = $('#b16').is(':checked') == true;
            var b32status = $('#b32').is(':checked') == true;
            console.log(event.srcElement.id);
            eventId = event.srcElement.id;
            if (eventId=='b08')
            {
                if (b08status==1)
                {console.log('b08 is set');
                    $('#b08').prop('checked', true);    $('#b16').prop('checked', false);   $('#b32').prop('checked', false);
                }
                if (b08status==0)
                {
                    $('#b08').prop('checked', true);    $('#b16').prop('checked', b16status);   $('#b32').prop('checked', b32status);
                }
            }
            else if (eventId=='b16')
            {
                if (b16status==1)
                {   console.log('b16 is set');
                    $('#b08').prop('checked', false);   $('#b16').prop('checked', true);    $('#b32').prop('checked', false);
                }
                if (b16status==0)
                {
                    $('#b08').prop('checked', b08status);   $('#b16').prop('checked', true);    $('#b32').prop('checked', b32status);
                }
            }
            else if (eventId=='b32')
            {
                if (b32status==1)
                {console.log('b32 is set');
                    $('#b08').prop('checked', false);   $('#b16').prop('checked', false);   $('#b32').prop('checked', true);
                }
                if (b32status==0)
                {
                    $('#b08').prop('checked', b08status);   $('#b16').prop('checked', b16status);   $('#b32').prop('checked', true);
                }
            }
            
        }
        function modifyTextFields()
    {
        var bits = numberOfBits();
        var myid = event.srcElement.id;
        var operation = myid.slice( myid.length-3,myid.length );
        myid = myid.slice(0,myid.length-3);
        console.log('the id and operation are: ', myid, operation)
        var stringVal = $('#'+myid).val();
        if(myid=='Bin1' || myid=='Bin2')
        {
            $.ajax({
                type:"POST",
                url: 'changeBinary',
                async: false,
                data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
                csrfmiddlewaretoken: "{{ csrf_token }}"},
                dataType: 'json',
                success: function (data)
                {
                    document.getElementById(myid).value = data.changedValue;
                }
            })
        }
        else if(myid=='Hex1' || myid=='Hex2')
        {$.ajax({
            type:"POST",
            url: 'changeHexa',
            async: false,
            data: {'stringVal':stringVal, 'bits':bits, 'operand':operation,
            csrfmiddlewaretoken: "{{ csrf_token }}"},
            dataType: 'json',
            success: function (data)
            {
                document.getElementById(myid).value = data.changedValue;
            }
        })}
        else
        {
            if(operation=='Add') var val = parseInt(stringVal) + 1;
            else if(operation=='Sub') var val = parseInt(stringVal) - 1;
            document.getElementById(myid).value = val;
        }
        modifyFormValues();
    }
    function modifyFormValues()
    {
        var bits = numberOfBits();
        var decString1 = ( $('#Dec1').val() );
        var binString1 = ( $('#Bin1').val() );
        var hexString1 = ( $('#Hex1').val() );
        var decString2 = ( $('#Dec2').val() );
        var binString2 = ( $('#Bin2').val() );
        var hexString2 = ( $('#Hex2').val() );
        
        var DecimalArth = ($( '#DecimalArth' ).val()); DecimalArth = DecimalArth.slice(0,1)
        var BinaryArth = ($( '#BinaryArth' ).val()); BinaryArth = BinaryArth.slice(0,1)
        var HexaArth = ($( '#HexaArth' ).val()); HexaArth = HexaArth.slice(0,1)

        console.log(DecimalArth, BinaryArth, HexaArth)

        
        
        
        $.ajax({
            type: "POST",
            url: "allArithmetic",
            data: {
                'dec1':decString1, 'bin1':binString1, 'hex1':hexString1, 'bits':bits,
                'dec2':decString2, 'bin2':binString2, 'hex2':hexString2,
                'decArth':DecimalArth, 'binArth':BinaryArth, 'hexArth':HexaArth,
                csrfmiddlewaretoken: "{{ csrf_token }}"
            },
            dataType: "json",
            success: function (data)
            {   console.log(data)
                for (const [id, value] of Object.entries(data))    
                {   
                    document.getElementById(id).value = value;
                }
            },
        })
        

    }
    </script>


</head>